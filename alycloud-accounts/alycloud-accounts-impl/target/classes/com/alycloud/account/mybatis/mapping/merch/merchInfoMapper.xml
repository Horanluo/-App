<?xml version="1.0" encoding="GBK" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
<mapper namespace="com.alycloud.account.mapper.MerchInfoMapper">
	<!-- add by Horanluo start -->
	<resultMap id="merchInfoResultMap" type="MerchInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Oct 19 16:25:43 GMT+08:00 2017.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="merchno" jdbcType="VARCHAR" property="merchno" />
    <result column="merch_name" jdbcType="VARCHAR" property="merchName" />
    <result column="full_name" jdbcType="VARCHAR" property="fullName" />
    <result column="merch_type" jdbcType="INTEGER" property="merchType" />
    <result column="organ_no" jdbcType="VARCHAR" property="organNo" />
    <result column="biz_license" jdbcType="VARCHAR" property="bizLicense" />
    <result column="legal_name" jdbcType="VARCHAR" property="legalName" />
    <result column="identity_card" jdbcType="VARCHAR" property="identityCard" />
    <result column="link_man" jdbcType="VARCHAR" property="linkMan" />
    <result column="email" jdbcType="VARCHAR" property="email" />
    <result column="telephone" jdbcType="VARCHAR" property="telephone" />
    <result column="mobile" jdbcType="VARCHAR" property="mobile" />
    <result column="saler" jdbcType="INTEGER" property="saler" />
    <result column="saler_name" jdbcType="VARCHAR" property="salerName" />
    <result column="mcc" jdbcType="VARCHAR" property="mcc" />
    <result column="industry_type" jdbcType="INTEGER" property="industryType" />
    <result column="area_code" jdbcType="VARCHAR" property="areaCode" />
    <result column="province" jdbcType="VARCHAR" property="province" />
    <result column="city" jdbcType="VARCHAR" property="city" />
    <result column="address" jdbcType="VARCHAR" property="address" />
    <result column="super_agent" jdbcType="VARCHAR" property="superAgent" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="open_time" jdbcType="VARCHAR" property="openTime" />
    <result column="audit_status" jdbcType="INTEGER" property="auditStatus" />
    <result column="judg_status" jdbcType="INTEGER" property="judgStatus" />
    <result column="audit_agentno" jdbcType="VARCHAR" property="auditAgentno" />
    <result column="rate_mode" jdbcType="INTEGER" property="rateMode" />
    <result column="debit_rate" jdbcType="DECIMAL" property="debitRate" />
    <result column="debit_fixed" jdbcType="DECIMAL" property="debitFixed" />
    <result column="credit_rate" jdbcType="DECIMAL" property="creditRate" />
    <result column="credit_fixed" jdbcType="DECIMAL" property="creditFixed" />
    <result column="stripe_card_fixed" jdbcType="DECIMAL" property="stripeCardFixed" />
    <result column="chip_card_fixed" jdbcType="DECIMAL" property="chipCardFixed" />
    <result column="agent_fee_id" jdbcType="INTEGER" property="agentFeeId" />
    <result column="settle_type" jdbcType="INTEGER" property="settleType" />
    <result column="def_settle_type" jdbcType="INTEGER" property="defSettleType" />
    <result column="accountno" jdbcType="VARCHAR" property="accountno" />
    <result column="account_type" jdbcType="INTEGER" property="accountType" />
    <result column="account_name" jdbcType="VARCHAR" property="accountName" />
    <result column="bankno" jdbcType="VARCHAR" property="bankno" />
    <result column="bank_name" jdbcType="VARCHAR" property="bankName" />
    <result column="amt_limit" jdbcType="DECIMAL" property="amtLimit" />
    <result column="day_limit" jdbcType="INTEGER" property="dayLimit" />
    <result column="month_limit" jdbcType="INTEGER" property="monthLimit" />
    <result column="trans_ctrl" jdbcType="INTEGER" property="transCtrl" />
    <result column="biz_license_img" jdbcType="VARCHAR" property="bizLicenseImg" />
    <result column="account_img" jdbcType="VARCHAR" property="accountImg" />
    <result column="identity1_img" jdbcType="VARCHAR" property="identity1Img" />
    <result column="identity2_img" jdbcType="VARCHAR" property="identity2Img" />
    <result column="identity3_img" jdbcType="VARCHAR" property="identity3Img" />
    <result column="card1_img" jdbcType="VARCHAR" property="card1Img" />
    <result column="card2_img" jdbcType="VARCHAR" property="card2Img" />
    <result column="credit1_img" jdbcType="VARCHAR" property="credit1Img" />
    <result column="credit2_img" jdbcType="VARCHAR" property="credit2Img" />
    <result column="cashier_img" jdbcType="VARCHAR" property="cashierImg" />
    <result column="place_img" jdbcType="VARCHAR" property="placeImg" />
    <result column="head_img" jdbcType="VARCHAR" property="headImg" />
    <result column="contract_img" jdbcType="VARCHAR" property="contractImg" />
    <result column="other_file" jdbcType="VARCHAR" property="otherFile" />
    <result column="add_time" jdbcType="VARCHAR" property="addTime" />
    <result column="first_agentno" jdbcType="VARCHAR" property="firstAgentno" />
    <result column="branchno" jdbcType="VARCHAR" property="branchno" />
    <result column="saler_id" jdbcType="INTEGER" property="salerId" />
    <result column="biz_type" jdbcType="INTEGER" property="bizType" />
    <result column="trad_rate" jdbcType="DECIMAL" property="tradRate" />
    <result column="t0_rate" jdbcType="DECIMAL" property="t0Rate" />
    <result column="merch_level" jdbcType="INTEGER" property="merchLevel" />
    <result column="customerno" jdbcType="VARCHAR" property="customerno" />
    <result column="silence_merch" jdbcType="VARCHAR" property="silenceMerch" />
    <result column="t0_fixed" jdbcType="DECIMAL" property="t0Fixed" />
    <result column="app_rate" jdbcType="DECIMAL" property="appRate" />
    <result column="app_fixed" jdbcType="DECIMAL" property="appFixed" />
    <result column="manu_rate" jdbcType="DECIMAL" property="manuRate" />
    <result column="manu_fixed" jdbcType="DECIMAL" property="manuFixed" />
    <result column="wx_rate" jdbcType="DECIMAL" property="wxRate" />
    <result column="zfb_rate" jdbcType="DECIMAL" property="zfbRate" />
    <result column="bd_rate" jdbcType="DECIMAL" property="bdRate" />
    <result column="qq_rate" jdbcType="DECIMAL" property="qqRate" />
    <result column="jd_rate" jdbcType="DECIMAL" property="jdRate" />
    <result column="merch_key" jdbcType="VARCHAR" property="merchKey" />
    <result column="online_url_notify" jdbcType="VARCHAR" property="onlineUrlNotify" />
    <result column="online_url_return" jdbcType="VARCHAR" property="onlineUrlReturn" />
    <result column="app_credit" jdbcType="DECIMAL" property="appCredit" />
    <result column="app_t0_rate" jdbcType="DECIMAL" property="appT0Rate" />
    <result column="gateway_rate_t0" jdbcType="DECIMAL" property="gatewayRateT0" />
    <result column="head_index" jdbcType="INTEGER" property="headIndex" />
    <result column="fastpay_rate_t0" jdbcType="DECIMAL" property="fastpayRateT0" />
    <result column="fastpay_rate_t1" jdbcType="DECIMAL" property="fastpayRateT1" />
    <result column="hpMerCode" jdbcType="VARCHAR" property="hpmercode" />
    <result column="sync_type_status" jdbcType="INTEGER" property="syncTypeStatus" />
    <result column="type" jdbcType="INTEGER" property="type" />
    <result column="force_settle_type" jdbcType="INTEGER" property="forceSettleType" />
    <result column="hxtcFastPayRateT0" jdbcType="DECIMAL" property="hxtcfastpayratet0" />
    <result column="hfbankD0MerchNo" jdbcType="VARCHAR" property="hfbankd0merchno" />
    <result column="hfbankT1MerchNo" jdbcType="VARCHAR" property="hfbankt1merchno" />
    <result column="user_id" jdbcType="VARCHAR" property="userId" />
    <result column="json_str" jdbcType="VARCHAR" property="jsonStr" />
    <result column="real_name_auth_status" jdbcType="INTEGER" property="realNameAuthStatus" />
  </resultMap>
  
  <resultMap id="tranDetailResultMap" type="ReceiveDetailInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 23 11:08:10 GMT+08:00 2017.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="merchno" jdbcType="VARCHAR" property="merchno" />
    <result column="merch_name" jdbcType="VARCHAR" property="merchName" />
    <result column="agentno" jdbcType="VARCHAR" property="agentno" />
    <result column="agent_name" jdbcType="VARCHAR" property="agentName" />
    <result column="branchno" jdbcType="VARCHAR" property="branchno" />
    <result column="branch_name" jdbcType="VARCHAR" property="branchName" />
    <result column="orderno" jdbcType="VARCHAR" property="orderno" />
    <result column="channel_orderno" jdbcType="VARCHAR" property="channelOrderno" />
    <result column="amount" jdbcType="DECIMAL" property="amount" />
    <result column="channel_fee" jdbcType="DECIMAL" property="channelFee" />
    <result column="branch_fee" jdbcType="DECIMAL" property="branchFee" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="descr" jdbcType="VARCHAR" property="descr" />
    <result column="id_card" jdbcType="VARCHAR" property="idCard" />
    <result column="settle_time" jdbcType="VARCHAR" property="settleTime" />
    <result column="pay_type" jdbcType="VARCHAR" property="payType" />
    <result column="merch_fee" jdbcType="DECIMAL" property="merchFee" />
    <result column="fee" jdbcType="DECIMAL" property="fee" />
    <result column="receiveFee" jdbcType="DECIMAL" property="receiveFee" />
    <result column="rate" jdbcType="DECIMAL" property="rate" />
  </resultMap>
  
  <resultMap id="withdrawalDetailResultMap" type="com.alycloud.modules.entity.WithdrawalDetailInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 23 17:11:45 GMT+08:00 2017.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="trans_date" jdbcType="VARCHAR" property="transDate" />
    <result column="trans_time" jdbcType="VARCHAR" property="transTime" />
    <result column="branchno" jdbcType="VARCHAR" property="branchno" />
    <result column="branch_name" jdbcType="VARCHAR" property="branchName" />
    <result column="agentno" jdbcType="VARCHAR" property="agentno" />
    <result column="agent_name" jdbcType="VARCHAR" property="agentName" />
    <result column="merchno" jdbcType="VARCHAR" property="merchno" />
    <result column="merch_name" jdbcType="VARCHAR" property="merchName" />
    <result column="cardno" jdbcType="VARCHAR" property="cardno" />
    <result column="trans_type" jdbcType="INTEGER" property="transType" />
    <result column="amount" jdbcType="DECIMAL" property="amount" />
    <result column="traceno" jdbcType="VARCHAR" property="traceno" />
    <result column="status" jdbcType="INTEGER" property="status" />
    <result column="login_name" jdbcType="VARCHAR" property="loginName" />
    <result column="amount_before" jdbcType="DECIMAL" property="amountBefore" />
    <result column="amount_after" jdbcType="DECIMAL" property="amountAfter" />
    <result column="trans_amount" jdbcType="DECIMAL" property="transAmount" />
    <result column="trans_fee" jdbcType="DECIMAL" property="transFee" />
    <result column="type_code" jdbcType="VARCHAR" property="typeCode" />
    <result column="trans_refno" jdbcType="VARCHAR" property="transRefno" />
    <result column="add_time" jdbcType="VARCHAR" property="addTime" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
    <result column="pay_status" jdbcType="INTEGER" property="payStatus" />
    <result column="pay_msg" jdbcType="VARCHAR" property="payMsg" />
    <result column="pay_type" jdbcType="INTEGER" property="payType" />
    <result column="batchno" jdbcType="VARCHAR" property="batchno" />
    <result column="address" jdbcType="VARCHAR" property="address" />
    <result column="accountno" jdbcType="VARCHAR" property="accountno" />
    <result column="account_name" jdbcType="VARCHAR" property="accountName" />
    <result column="bankno" jdbcType="VARCHAR" property="bankno" />
    <result column="bank_name" jdbcType="VARCHAR" property="bankName" />
    <result column="process_time" jdbcType="VARCHAR" property="processTime" />
    <result column="df_type" jdbcType="INTEGER" property="dfType" />
    <result column="mobile" jdbcType="VARCHAR" property="mobile" />
    <result column="bank_type" jdbcType="VARCHAR" property="bankType" />
    <result column="channel_merchno" jdbcType="VARCHAR" property="channelMerchno" />
    <result column="payment_type" jdbcType="INTEGER" property="paymentType" />
    <result column="tranTotal" jdbcType="DECIMAL" property="tranTotal" />
    <result column="fee" jdbcType="DECIMAL" property="fee" />
    <result column="withdrawFee" jdbcType="DECIMAL" property="withdrawFee" />
    <result column="rate" jdbcType="DECIMAL" property="rate" />
  </resultMap>
   
  <sql id="qrcode_order_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 23 11:30:24 GMT+08:00 2017.
    qt.id, qt.merchno, qt.merch_name, qt.agentno, qt.agent_name, qt.branchno, qt.branch_name, qt.orderno, 
    qt.channel_orderno,qt.amount,qt.channel_fee, qt.branch_fee, qt.status, qt.status_desc,qt.certno,qt.trans_date-->
    qt.id id, qt.merchno merchno, qt.merch_name merchName, qt.agentno agentNo, qt.agent_name agentName, qt.branchno branchNo, 
    qt.branch_name branchName, qt.orderno orderNo, qt.channel_orderno channelOrderNo,qt.amount amount,qt.channel_fee channelFee, 
    qt.branch_fee branchFee, qt.status status, qt.status_desc descr,qt.certno idCard,CONCAT(qt.trans_date,' ',qt.trans_time) addTime
  </sql>
  
  <sql id="fast_order_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 23 11:08:10 GMT+08:00 2017.
    -->
    fo.id id, fo.merchno merchno, fo.merch_name merchName, fo.agentno agentNo, fo.agent_name agentName, fo.branchno branchNo, 
    fo.branch_name branchName, fo.orderno orderNo,fo.channel_orderno channelOrderNo, fo.amount amount, fo.channel_fee channelFee, 
    fo.branch_fee branchFee, fo.status status, fo.descr descr, fo.id_card idCard,fo.add_time addTime
  </sql>
  
  <sql id="Merch_info_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Oct 19 16:25:43 GMT+08:00 2017.
    -->
    id, merchno, merch_name, full_name, merch_type, organ_no, biz_license, legal_name, 
    identity_card, link_man, email, telephone, mobile, saler, saler_name, mcc, industry_type, 
    area_code, province, city, address, super_agent, status, open_time, audit_status, 
    judg_status, audit_agentno, rate_mode, debit_rate, debit_fixed, credit_rate, credit_fixed, 
    stripe_card_fixed, chip_card_fixed, agent_fee_id, settle_type, def_settle_type, accountno, 
    account_type, account_name, bankno, bank_name, amt_limit, day_limit, month_limit, 
    trans_ctrl, biz_license_img, account_img, identity1_img, identity2_img, identity3_img, 
    card1_img, card2_img, credit1_img, credit2_img, cashier_img, place_img, head_img, 
    contract_img, other_file, add_time, first_agentno, branchno, saler_id, biz_type, 
    trad_rate, t0_rate, merch_level, customerno, silence_merch, t0_fixed, app_rate, app_fixed, 
    manu_rate, manu_fixed, wx_rate, zfb_rate, bd_rate, qq_rate, jd_rate, merch_key, online_url_notify, 
    online_url_return, app_credit, app_t0_rate, gateway_rate_t0, head_index, fastpay_rate_t0, 
    fastpay_rate_t1, hpMerCode, sync_type_status, type, force_settle_type, hxtcFastPayRateT0, 
    hfbankD0MerchNo, hfbankT1MerchNo, user_id,json_str,real_name_auth_status
  </sql>
  
  <sql id="merch_virtual_trans_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 23 17:11:45 GMT+08:00 2017.
    -->
    mvt.id, mvt.trans_date, mvt.trans_time, mvt.branchno, mvt.branch_name, mvt.agentno, mvt.agent_name, mvt.merchno, 
    mvt.merch_name, mvt.cardno, mvt.trans_type, mvt.amount, mvt.traceno, mvt.status, mvt.login_name, mvt.amount_before, 
    mvt.amount_after, mvt.trans_amount, mvt.trans_fee, mvt.type_code, mvt.trans_refno, mvt.add_time, mvt.remark, 
    mvt.pay_status, mvt.pay_msg, mvt.pay_type, mvt.batchno, mvt.address, mvt.accountno, mvt.account_name, mvt.bankno, 
    mvt.bank_name, mvt.process_time, mvt.df_type, mvt.mobile, mvt.bank_type, mvt.channel_merchno, mvt.payment_type
  </sql>
  
    <select 
    	id="getByLoginName"
    	parameterType="HashMap"
    	resultMap="merchInfoResultMap">
    	select 
			<include refid="Merch_info_Column_List" />
    	from 
    		merch_info
    	where
    	<if test="loginName != null and loginName != ''">
    		user_id = #{loginName}
    	</if>
    	<if test="merchMobile != null and merchMobile != ''">
    		and mobile = #{merchMobile}
    	</if>
    </select>
    
    <insert 
    	 id="addMerchInfo"
    	 parameterType="MerchInfo"
    	 useGeneratedKeys="true" 
    	 keyProperty="id">
      insert into merch_info (merchno, merch_name, 
      full_name, merch_type, organ_no, 
      biz_license, legal_name, identity_card, 
      link_man, email, telephone, 
      mobile, saler, saler_name, 
      mcc, industry_type, area_code, 
      province, city, address, 
      super_agent, status, open_time, 
      audit_status, judg_status, audit_agentno, 
      rate_mode, debit_rate, debit_fixed, 
      credit_rate, credit_fixed, stripe_card_fixed, 
      chip_card_fixed, agent_fee_id, settle_type, 
      def_settle_type, accountno, account_type, 
      account_name, bankno, bank_name, 
      amt_limit, day_limit, month_limit, 
      trans_ctrl, biz_license_img, account_img, 
      identity1_img, identity2_img, identity3_img, 
      card1_img, card2_img, credit1_img, 
      credit2_img, cashier_img, place_img, 
      head_img, contract_img, other_file, 
      add_time, first_agentno, branchno, 
      saler_id, biz_type, trad_rate, 
      t0_rate, merch_level, customerno, 
      silence_merch, t0_fixed, app_rate, 
      app_fixed, manu_rate, manu_fixed, 
      wx_rate, zfb_rate, bd_rate, 
      qq_rate, jd_rate, merch_key, 
      online_url_notify, online_url_return, app_credit, 
      app_t0_rate, gateway_rate_t0, head_index, 
      fastpay_rate_t0, fastpay_rate_t1, hpMerCode, 
      sync_type_status, type, force_settle_type, 
      hxtcFastPayRateT0, hfbankD0MerchNo, hfbankT1MerchNo, 
      user_id,json_str,real_name_auth_status)
    values (#{merchno,jdbcType=VARCHAR}, #{merchName,jdbcType=VARCHAR}, 
      #{fullName,jdbcType=VARCHAR}, #{merchType,jdbcType=INTEGER}, #{organNo,jdbcType=VARCHAR}, 
      #{bizLicense,jdbcType=VARCHAR}, #{legalName,jdbcType=VARCHAR}, #{identityCard,jdbcType=VARCHAR}, 
      #{linkMan,jdbcType=VARCHAR}, #{email,jdbcType=VARCHAR}, #{telephone,jdbcType=VARCHAR}, 
      #{mobile,jdbcType=VARCHAR}, #{saler,jdbcType=INTEGER}, #{salerName,jdbcType=VARCHAR}, 
      #{mcc,jdbcType=VARCHAR}, #{industryType,jdbcType=INTEGER}, #{areaCode,jdbcType=VARCHAR}, 
      #{province,jdbcType=VARCHAR}, #{city,jdbcType=VARCHAR}, #{address,jdbcType=VARCHAR}, 
      #{superAgent,jdbcType=VARCHAR}, #{status,jdbcType=INTEGER}, #{openTime,jdbcType=VARCHAR}, 
      #{auditStatus,jdbcType=INTEGER}, #{judgStatus,jdbcType=INTEGER}, #{auditAgentno,jdbcType=VARCHAR}, 
      #{rateMode,jdbcType=INTEGER}, #{debitRate,jdbcType=DECIMAL}, #{debitFixed,jdbcType=DECIMAL}, 
      #{creditRate,jdbcType=DECIMAL}, #{creditFixed,jdbcType=DECIMAL}, #{stripeCardFixed,jdbcType=DECIMAL}, 
      #{chipCardFixed,jdbcType=DECIMAL}, #{agentFeeId,jdbcType=INTEGER}, #{settleType,jdbcType=INTEGER}, 
      #{defSettleType,jdbcType=INTEGER}, #{accountno,jdbcType=VARCHAR}, #{accountType,jdbcType=INTEGER}, 
      #{accountName,jdbcType=VARCHAR}, #{bankno,jdbcType=VARCHAR}, #{bankName,jdbcType=VARCHAR}, 
      #{amtLimit,jdbcType=DECIMAL}, #{dayLimit,jdbcType=INTEGER}, #{monthLimit,jdbcType=INTEGER}, 
      #{transCtrl,jdbcType=INTEGER}, #{bizLicenseImg,jdbcType=VARCHAR}, #{accountImg,jdbcType=VARCHAR}, 
      #{identity1Img,jdbcType=VARCHAR}, #{identity2Img,jdbcType=VARCHAR}, #{identity3Img,jdbcType=VARCHAR}, 
      #{card1Img,jdbcType=VARCHAR}, #{card2Img,jdbcType=VARCHAR}, #{credit1Img,jdbcType=VARCHAR}, 
      #{credit2Img,jdbcType=VARCHAR}, #{cashierImg,jdbcType=VARCHAR}, #{placeImg,jdbcType=VARCHAR}, 
      #{headImg,jdbcType=VARCHAR}, #{contractImg,jdbcType=VARCHAR}, #{otherFile,jdbcType=VARCHAR}, 
      #{addTime,jdbcType=VARCHAR}, #{firstAgentno,jdbcType=VARCHAR}, #{branchno,jdbcType=VARCHAR}, 
      #{salerId,jdbcType=INTEGER}, #{bizType,jdbcType=INTEGER}, #{tradRate,jdbcType=DECIMAL}, 
      #{t0Rate,jdbcType=DECIMAL}, #{merchLevel,jdbcType=INTEGER}, #{customerno,jdbcType=VARCHAR}, 
      #{silenceMerch,jdbcType=VARCHAR}, #{t0Fixed,jdbcType=DECIMAL}, #{appRate,jdbcType=DECIMAL}, 
      #{appFixed,jdbcType=DECIMAL}, #{manuRate,jdbcType=DECIMAL}, #{manuFixed,jdbcType=DECIMAL}, 
      #{wxRate,jdbcType=DECIMAL}, #{zfbRate,jdbcType=DECIMAL}, #{bdRate,jdbcType=DECIMAL}, 
      #{qqRate,jdbcType=DECIMAL}, #{jdRate,jdbcType=DECIMAL}, #{merchKey,jdbcType=VARCHAR}, 
      #{onlineUrlNotify,jdbcType=VARCHAR}, #{onlineUrlReturn,jdbcType=VARCHAR}, #{appCredit,jdbcType=DECIMAL}, 
      #{appT0Rate,jdbcType=DECIMAL}, #{gatewayRateT0,jdbcType=DECIMAL}, #{headIndex,jdbcType=INTEGER}, 
      #{fastpayRateT0,jdbcType=DECIMAL}, #{fastpayRateT1,jdbcType=DECIMAL}, #{hpmercode,jdbcType=VARCHAR}, 
      #{syncTypeStatus,jdbcType=INTEGER}, #{type,jdbcType=INTEGER}, #{forceSettleType,jdbcType=INTEGER}, 
      #{hxtcfastpayratet0,jdbcType=DECIMAL}, #{hfbankd0merchno,jdbcType=VARCHAR}, #{hfbankt1merchno,jdbcType=VARCHAR}, 
      #{userId,jdbcType=VARCHAR},#{jsonStr,jdbcType=VARCHAR},#{realNameAuthStatus,jdbcType=INTEGER})
    </insert>
    
    <select 
    	id="getSuccTranAmt"
    	parameterType="HashMap"
    	resultType="java.math.BigDecimal">
		select sum(amount) from 
		(
			select sum(f.amount) amount
			from 
				merch_info m1
			LEFT JOIN fast_trans f ON m1.merchno = f.merchno
			where m1.merchno=#{merchno}
			UNION ALL
			select sum(qth.trans_amount) amount
			from 
				merch_info m2
			LEFT JOIN qrcode_trans_history qth ON m2.merchno = qth.merchno
			where m2.merchno=#{merchno}
			UNION ALL
			select sum(qtt.trans_amount) amount
			from 
				merch_info m3
			LEFT JOIN qrcode_trans_today qtt ON m3.merchno = qtt.merchno
			where m3.merchno=#{merchno}
		) as total_amount
    </select>
    
    <select 
    	id="getAvailAmt"
    	parameterType="HashMap"
    	resultType="java.math.BigDecimal">
		select sum(mvc.avail_amount) availAmount
		from merch_info m1
		LEFT JOIN merch_virtual_card mvc ON m1.merchno = mvc.merchno
		where m1.merchno=#{merchno} and mvc.channel_type=-1
    </select>
    
    <select 
    	id="getTranDetail"
    	parameterType="HashMap"
    	resultMap="tranDetailResultMap">
    	select * from (
			select
			<include refid="fast_order_Column_List" />,'6' pay_type,fo.merch_fee
			from merch_info m1
			LEFT JOIN fast_order fo ON m1.merchno = fo.merchno
			where m1.merchno=#{merchno}
			<if test="startDate != null and startDate != ''">
				and str_to_date(fo.add_time,'%Y-%m-%d') &gt;=
				str_to_date(#{startDate,jdbcType=VARCHAR},'%Y-%m-%d')
			</if>
			<if test="endDate != null and endDate != ''">
				and str_to_date(fo.add_time,'%Y-%m-%d') &lt;=
				str_to_date(#{endDate,jdbcType=VARCHAR},'%Y-%m-%d')
			</if>
			UNION
			select
			<include refid="qrcode_order_Column_List" />,qt.pay_type,qt.merch_fee
			from merch_info m2
			LEFT JOIN qrcode_order qt ON m2.merchno = qt.merchno
			where m2.merchno=#{merchno}
			<if test="startDate != null and startDate != ''">
				and str_to_date(qt.trans_date,'%Y-%m-%d') &gt;=
				str_to_date(#{startDate,jdbcType=VARCHAR},'%Y-%m-%d')
			</if>
			<if test="endDate != null and endDate != ''">
				and str_to_date(qt.trans_date,'%Y-%m-%d') &lt;=
				str_to_date(#{endDate,jdbcType=VARCHAR},'%Y-%m-%d')
			</if>
		) allTran order by allTran.addTime desc
    </select>
    
    <select 
    	id="getWithdrawalDetail"
    	parameterType="HashMap"
    	resultMap="withdrawalDetailResultMap">
		select
		<include refid="merch_virtual_trans_Column_List" />
		,(select sum(mvt2.trans_amount) from merch_info m2
		LEFT JOIN merch_virtual_trans mvt2 ON m2.merchno = mvt2.merchno
		where m2.merchno=#{merchno}
		<if test="startDate != null and startDate != ''">
			and str_to_date(mvt2.add_time,'%Y-%m-%d') &gt;=
			str_to_date(#{startDate,jdbcType=VARCHAR},'%Y-%m-%d')
		</if>
		<if test="endDate != null and endDate != ''">
			and str_to_date(mvt2.add_time,'%Y-%m-%d') &lt;=
			str_to_date(#{endDate,jdbcType=VARCHAR},'%Y-%m-%d')
		</if>) withdrawalTotal
		from merch_info m1
		LEFT JOIN merch_virtual_trans mvt ON m1.merchno = mvt.merchno
		where m1.merchno=#{merchno}
		<if test="startDate != null and startDate != ''">
			and str_to_date(mvt.add_time,'%Y-%m-%d') &gt;=
			str_to_date(#{startDate,jdbcType=VARCHAR},'%Y-%m-%d')
		</if>
		<if test="endDate != null and endDate != ''">
			and str_to_date(mvt.add_time,'%Y-%m-%d') &lt;=
			str_to_date(#{endDate,jdbcType=VARCHAR},'%Y-%m-%d')
		</if>
		order by mvt2.add_time desc
    </select>
    
    <select 
    	id="getTranTotal"
    	parameterType="HashMap"
    	resultType="BigDecimal">
		select
		sum(f.amount)
		from merch_info m1
		LEFT JOIN fast_trans f ON m1.merchno = f.merchno
		where m1.merchno=#{merchno}
		<if test="startDate != null and startDate != ''">
			and str_to_date(f.settle_time,'%Y-%m-%d') &gt;=
			str_to_date(#{startDate,jdbcType=VARCHAR},'%Y-%m-%d')
		</if>
		<if test="endDate != null and endDate != ''">
			and str_to_date(f.settle_time,'%Y-%m-%d') &lt;=
			str_to_date(#{endDate,jdbcType=VARCHAR},'%Y-%m-%d')
		</if>
		UNION
		select
		sum(qth.trans_amount)
		from merch_info m2
		LEFT JOIN qrcode_trans_history qth ON m2.merchno = qth.merchno
		where m2.merchno=#{merchno}
		<if test="startDate != null and startDate != ''">
			and str_to_date(qth.trans_date,'%Y-%m-%d') &gt;=
			str_to_date(#{startDate,jdbcType=VARCHAR},'%Y-%m-%d')
		</if>
		<if test="endDate != null and endDate != ''">
			and str_to_date(qth.trans_date,'%Y-%m-%d') &lt;=
			str_to_date(#{endDate,jdbcType=VARCHAR},'%Y-%m-%d')
		</if>
		UNION
		select
		sum(qtt.trans_amount)
		from merch_info m3
		LEFT JOIN qrcode_trans_today qtt ON m3.merchno = qtt.merchno
		where m3.merchno=#{merchno}
		<if test="startDate != null and startDate != ''">
			and str_to_date(qtt.trans_date,'%Y-%m-%d') &gt;=
			str_to_date(#{startDate,jdbcType=VARCHAR},'%Y-%m-%d')
		</if>
		<if test="endDate != null and endDate != ''">
			and str_to_date(qtt.trans_date,'%Y-%m-%d') &lt;=
			str_to_date(#{endDate,jdbcType=VARCHAR},'%Y-%m-%d')
		</if>
    </select>
    
    <select 
    	id="getMerchInfoByStatus"
    	parameterType="HashMap"
    	resultMap="merchInfoResultMap">
		select m1.merchno,m1.merch_name,m1.full_name,m1.legal_name,m1.mobile,DATE_FORMAT(m1.open_time,'%Y-%m-%d') as open_time,m1.audit_status
		from merch_user u1 left join merch_info m1 on u1.merch_id=m1.id
		where u1.refer_name=#{referName,jdbcType=VARCHAR} 
		<if test="userRank != null and userRank != ''"> 
			and u1.user_rank=#{userRank,jdbcType=VARCHAR}
		</if>
		<if test="status != null and status != ''"> 
			and m1.audit_status=#{status,jdbcType=VARCHAR}
		</if>
		<if test="merchName != null and merchName != ''"> 
			and m1.legal_name like CONCAT('%', #{merchName}, '%')
		</if>
		<if test="mobile != null and mobile != ''"> 
			and m1.mobile like CONCAT('%', #{mobile}, '%')
		</if>
		<!--  union
		select m2.merchno,m2.merch_name,m2.full_name,m2.legal_name,m2.mobile,DATE_FORMAT(m2.open_time,'%Y-%m-%d') as open_time,m2.audit_status
		from merch_user u2 left join merch_info m2 on u2.merch_id=m2.id
		where 1=1
		<if test="userRank != null and userRank != ''"> 
			and u2.user_rank=#{userRank,jdbcType=VARCHAR}
		</if>
		<if test="status != null and status != ''"> 
			and m2.audit_status=#{status,jdbcType=VARCHAR}
		</if>
		<if test="merchName != null and merchName != ''"> 
			and m2.full_name like CONCAT('%', #{merchName}, '%')
		</if>
		<if test="mobile != null and mobile != ''"> 
			and m2.mobile like CONCAT('%', #{mobile}, '%')
		</if>
		and exists(select 1 from merch_user u3 where u2.refer_name=u3.id and u3.refer_name=#{referName,jdbcType=VARCHAR}) -->
    </select>
    
    <update 
		id="updateMerchInfo" 
		parameterType="MerchInfo">
	  update merch_info set
      merchno = #{merchno,jdbcType=VARCHAR},
      merch_name = #{merchName,jdbcType=VARCHAR},
      full_name = #{fullName,jdbcType=VARCHAR},
      merch_type = #{merchType,jdbcType=INTEGER},
      organ_no = #{organNo,jdbcType=VARCHAR},
      biz_license = #{bizLicense,jdbcType=VARCHAR},
      legal_name = #{legalName,jdbcType=VARCHAR},
      identity_card = #{identityCard,jdbcType=VARCHAR},
      link_man = #{linkMan,jdbcType=VARCHAR},
      email = #{email,jdbcType=VARCHAR},
      telephone = #{telephone,jdbcType=VARCHAR},
      mobile = #{mobile,jdbcType=VARCHAR},
      saler = #{saler,jdbcType=INTEGER},
      saler_name = #{salerName,jdbcType=VARCHAR},
      mcc = #{mcc,jdbcType=VARCHAR},
      industry_type = #{industryType,jdbcType=INTEGER},
      area_code = #{areaCode,jdbcType=VARCHAR},
      province = #{province,jdbcType=VARCHAR},
      city = #{city,jdbcType=VARCHAR},
      address = #{address,jdbcType=VARCHAR},
      super_agent = #{superAgent,jdbcType=VARCHAR},
      status = #{status,jdbcType=INTEGER},
      open_time = #{openTime,jdbcType=VARCHAR},
      audit_status = #{auditStatus,jdbcType=INTEGER},
      judg_status = #{judgStatus,jdbcType=INTEGER},
      audit_agentno = #{auditAgentno,jdbcType=VARCHAR},
      rate_mode = #{rateMode,jdbcType=INTEGER},
      debit_rate = #{debitRate,jdbcType=DECIMAL},
      debit_fixed = #{debitFixed,jdbcType=DECIMAL},
      credit_rate = #{creditRate,jdbcType=DECIMAL},
      credit_fixed = #{creditFixed,jdbcType=DECIMAL},
      stripe_card_fixed = #{stripeCardFixed,jdbcType=DECIMAL},
      chip_card_fixed = #{chipCardFixed,jdbcType=DECIMAL},
      agent_fee_id = #{agentFeeId,jdbcType=INTEGER},
      settle_type = #{settleType,jdbcType=INTEGER},
      def_settle_type = #{defSettleType,jdbcType=INTEGER},
      accountno = #{accountno,jdbcType=VARCHAR},
      account_type = #{accountType,jdbcType=INTEGER},
      account_name = #{accountName,jdbcType=VARCHAR},
      bankno = #{bankno,jdbcType=VARCHAR},
      bank_name = #{bankName,jdbcType=VARCHAR},
      amt_limit = #{amtLimit,jdbcType=DECIMAL},
      day_limit = #{dayLimit,jdbcType=INTEGER},
      month_limit = #{monthLimit,jdbcType=INTEGER},
      trans_ctrl = #{transCtrl,jdbcType=INTEGER},
      biz_license_img = #{bizLicenseImg,jdbcType=VARCHAR},
      account_img = #{accountImg,jdbcType=VARCHAR},
      identity1_img = #{identity1Img,jdbcType=VARCHAR},
      identity2_img = #{identity2Img,jdbcType=VARCHAR},
      identity3_img = #{identity3Img,jdbcType=VARCHAR},
      card1_img = #{card1Img,jdbcType=VARCHAR},
      card2_img = #{card2Img,jdbcType=VARCHAR},
      credit1_img = #{credit1Img,jdbcType=VARCHAR},
      credit2_img = #{credit2Img,jdbcType=VARCHAR},
      cashier_img = #{cashierImg,jdbcType=VARCHAR},
      place_img = #{placeImg,jdbcType=VARCHAR},
      head_img = #{headImg,jdbcType=VARCHAR},
      contract_img = #{contractImg,jdbcType=VARCHAR},
      other_file = #{otherFile,jdbcType=VARCHAR},
      add_time = #{addTime,jdbcType=VARCHAR},
      first_agentno = #{firstAgentno,jdbcType=VARCHAR},
      branchno = #{branchno,jdbcType=VARCHAR},
      saler_id = #{salerId,jdbcType=INTEGER},
      biz_type = #{bizType,jdbcType=INTEGER},
      trad_rate = #{tradRate,jdbcType=DECIMAL},
      t0_rate = #{t0Rate,jdbcType=DECIMAL},
      merch_level = #{merchLevel,jdbcType=INTEGER},
      customerno = #{customerno,jdbcType=VARCHAR},
      silence_merch = #{silenceMerch,jdbcType=VARCHAR},
      t0_fixed = #{t0Fixed,jdbcType=DECIMAL},
      app_rate = #{appRate,jdbcType=DECIMAL},
      app_fixed = #{appFixed,jdbcType=DECIMAL},
      manu_rate = #{manuRate,jdbcType=DECIMAL},
      manu_fixed = #{manuFixed,jdbcType=DECIMAL},
      wx_rate = #{wxRate,jdbcType=DECIMAL},
      zfb_rate = #{zfbRate,jdbcType=DECIMAL},
      bd_rate = #{bdRate,jdbcType=DECIMAL},
      qq_rate = #{qqRate,jdbcType=DECIMAL},
      jd_rate = #{jdRate,jdbcType=DECIMAL},
      merch_key = #{merchKey,jdbcType=VARCHAR},
      online_url_notify = #{onlineUrlNotify,jdbcType=VARCHAR},
      online_url_return = #{onlineUrlReturn,jdbcType=VARCHAR},
      app_credit = #{appCredit,jdbcType=DECIMAL},
      app_t0_rate = #{appT0Rate,jdbcType=DECIMAL},
      gateway_rate_t0 = #{gatewayRateT0,jdbcType=DECIMAL},
      head_index = #{headIndex,jdbcType=INTEGER},
      fastpay_rate_t0 = #{fastpayRateT0,jdbcType=DECIMAL},
      fastpay_rate_t1 = #{fastpayRateT1,jdbcType=DECIMAL},
      hpMerCode = #{hpmercode,jdbcType=VARCHAR},
      sync_type_status = #{syncTypeStatus,jdbcType=INTEGER},
      type = #{type,jdbcType=INTEGER},
      force_settle_type = #{forceSettleType,jdbcType=INTEGER},
      hxtcFastPayRateT0 = #{hxtcfastpayratet0,jdbcType=DECIMAL},
      hfbankD0MerchNo = #{hfbankd0merchno,jdbcType=VARCHAR},
      hfbankT1MerchNo = #{hfbankt1merchno,jdbcType=VARCHAR},
      user_id = #{userId,jdbcType=VARCHAR},
      json_str = #{jsonStr,jdbcType=VARCHAR},
      real_name_auth_status = #{realNameAuthStatus,jdbcType=INTEGER}
	  where id = #{id,jdbcType=INTEGER}
	</update>
	
	<select 
    	id="queryWithdrawalOrderDetail"
    	parameterType="String"
    	resultMap="withdrawalDetailResultMap">
		select
		<include refid="merch_virtual_trans_Column_List" />,mvt.fee,mvt.withdrawFee,mvt.rate
		from merch_virtual_trans mvt
		where mvt.traceno = #{orderNo,jdbcType=VARCHAR}
    </select>
    
    <select 
    	id="queryReceiveOrderDetail"
    	parameterType="HashMap"
    	resultMap="tranDetailResultMap">
    	<if test="payType == 6"> 
			select
			<include refid="fast_order_Column_List" />,'6' pay_type,fo.merch_fee
			,fo.fee,fo.receiveFee,fo.rate
			from fast_order fo
			where fo.orderno = #{orderNo,jdbcType=VARCHAR}
		</if>
		<if test="payType == 1 or payType == 2">
			select
			<include refid="qrcode_order_Column_List" />,qt.pay_type,qt.merch_fee
			,qt.fee,qt.receiveFee,qt.rate
			from qrcode_order qt
			where qt.orderno=#{orderNo,jdbcType=VARCHAR}
		</if>
    </select>
    
    <select 
    	id="queryReceiveDetailByStatus"
    	parameterType="HashMap"
    	resultMap="tranDetailResultMap">
    	select * from(
			select
			<include refid="fast_order_Column_List" />,'6' pay_type,fo.merch_fee
			,fo.fee,fo.receiveFee,fo.rate
			from merch_info m1
			LEFT JOIN fast_order fo ON m1.merchno = fo.merchno
			where m1.merchno=#{merchno} 
			<if test="tranStatus != null and tranStatus != ''">
				and fo.status=#{tranStatus,jdbcType=VARCHAR}
			</if>
			<if test="startDate != null and startDate != ''">
				and str_to_date(fo.add_time,'%Y-%m-%d') &gt;=
				str_to_date(#{startDate,jdbcType=VARCHAR},'%Y-%m-%d')
			</if>
			<if test="endDate != null and endDate != ''">
				and str_to_date(fo.add_time,'%Y-%m-%d') &lt;=
				str_to_date(#{endDate,jdbcType=VARCHAR},'%Y-%m-%d')
			</if>
			UNION
			select
			<include refid="qrcode_order_Column_List" />,qt.pay_type,qt.merch_fee
			,qt.fee,qt.receiveFee,qt.rate
			from merch_info m2
			LEFT JOIN qrcode_order qt ON m2.merchno = qt.merchno
			where m2.merchno=#{merchno}
			<if test="tranStatus != null and tranStatus != ''">
				and qt.status=#{tranStatus,jdbcType=VARCHAR}
			</if>
			<if test="startDate != null and startDate != ''">
				and str_to_date(qt.trans_date,'%Y-%m-%d') &gt;=
				str_to_date(#{startDate,jdbcType=VARCHAR},'%Y-%m-%d')
			</if>
			<if test="endDate != null and endDate != ''">
				and str_to_date(qt.trans_date,'%Y-%m-%d') &lt;=
				str_to_date(#{endDate,jdbcType=VARCHAR},'%Y-%m-%d')
			</if>
		) allTran  where allTran.id != '' order by allTran.addTime desc
    </select>
    
    <select 
    	id="queryWithdrawalDetailByStatus"
    	parameterType="HashMap"
    	resultMap="withdrawalDetailResultMap">
		select
		<include refid="merch_virtual_trans_Column_List" />,mvt.fee,mvt.withdrawFee,mvt.rate
		from merch_info m1
		LEFT JOIN merch_virtual_trans mvt ON m1.merchno = mvt.merchno
		where m1.merchno=#{merchno}
		<if test="tranStatus != null and tranStatus != ''">
			and mvt.pay_status=#{tranStatus,jdbcType=VARCHAR}
		</if>
		<if test="startDate != null and startDate != ''">
			and str_to_date(mvt.add_time,'%Y-%m-%d') &gt;=
			str_to_date(#{startDate,jdbcType=VARCHAR},'%Y-%m-%d')
		</if>
		<if test="endDate != null and endDate != ''">
			and str_to_date(mvt.add_time,'%Y-%m-%d') &lt;=
			str_to_date(#{endDate,jdbcType=VARCHAR},'%Y-%m-%d')
		</if>
		order by mvt.add_time desc
    </select>
	<!-- add by Horanluo end -->
	<!--  
		数据库中的表名
	-->
	<sql id="tableName">
		merch_info
	</sql>
	<!--  
		字段映射关系
	-->
	<sql id="fieldMapping">
   		id as id,
		merchno as merchno,
		branchno as branchno,
		merch_name as merchName,
		email as email,
		mobile as mobile,
		address as address,
		telephone as telephone,
		status as status,
		open_time as openTime,
		audit_agentno as auditAgentno,
		audit_status as auditStatus,
		judg_status as judgStatus,
		debit_rate as debitRate,
		debit_fixed as debitFixed,
		credit_rate as creditRate,
		credit_fixed as creditFixed,
		accountno as accountno,
		account_type as accountType,
		account_name as accountName,
		bankno as bankno,
		bank_name as bankName,
		add_time as addTime,
		t0_rate as t0Rate,
		biz_type as bizType,
		merch_type as merchType,
		mcc as mcc,
		manu_rate as manuRate,
		link_man as linkMan,
		industry_type as industryType,
		app_rate as appRate,
		app_fixed as appFixed,
		app_credit as appCredit,
		app_t0_rate as appT0Rate,
		super_agent as superAgent,
		merch_key as merchKey,
		merch_level as merchLevel,
		trans_ctrl as transCtrl,
		identity_card as identityCard,
		identity1_img as identity1Img,
		identity2_img as identity2Img,
		identity3_img as identity3Img,
		card1_img as card1Img,
		province as province,
		city as city,
		area_code as areaCode,
		full_name as fullName,
		legal_name as legalName,
		fastpay_rate_t0 as fastpayRateT0,
		fastpay_rate_t1 as fastpayRateT1,
		sync_type_status as syncTypeStatus,
		type as type,
		def_settle_type as defSettleType,
		force_settle_type as forceSettleType,
		biz_license_img as bizLicenseImg,
		head_img as headImg,
		place_img as placeImg,
		cashier_img as cashierImg,
		contract_img as contractImg,
		other_file as otherFile,
		hpMerCode as hpMerCode,
		hxtcFastPayRateT0 as hxtcFastPayRateT0,
		user_id as userId,
		json_str as jsonStr,
		real_name_auth_status as realNameAuthStatus,
		silence_merch as silenceMerch
	</sql> 
	
	<!--  
		更新字段
	-->
	<sql id="updateField">
	     <trim prefix="set" prefixOverrides=",">
		     <if test="fullName !=null">
		         , full_name = #{fullName}
		     </if>
		     <if test="merchName !=null">
		         , merch_name = #{merchName}
		     </if>
		     <if test="legalName !=null">
		         , legal_name = #{legalName}
		     </if>
		     <if test="identityCard !=null">
		         , identity_card = #{identityCard}
		     </if>
		     <if test="identity1Img !=null">
		         , identity1_img = #{identity1Img}
		     </if>
		     <if test="identity2Img !=null">
		         , identity2_img = #{identity2Img}
		     </if>
		     <if test="identity3Img !=null">
		         , identity3_img = #{identity3Img}
		     </if>
		     <if test="linkMan !=null">
		         , link_man = #{linkMan}
		     </if>
		     <if test="telephone !=null">
		         , telephone = #{telephone}
		     </if>
		     <if test="email !=null">
		         , email = #{email}
		     </if>
		     <if test="address !=null">
		         , address = #{address}
		     </if>
		     <if test="auditStatus !=null">
		         , audit_status = #{auditStatus}
		     </if>
		     <if test="judgStatus !=null">
		         , judg_status = #{judgStatus}
		     </if>
		     <if test="accountName !=null">
		         , account_name = #{accountName}
		     </if>
	         <if test="accountType !=null">
		         , account_type = #{accountType}
		     </if>
		     <if test="accountno !=null">
		         , accountno = #{accountno}
		     </if>
		     <if test="bankName !=null">
		         , bank_name = #{bankName}
		     </if>
		     <if test="bankno !=null">
		         , bankno = #{bankno}
		     </if>
		     <if test="card1Img !=null">
		         , card1_img = #{card1Img}
		     </if>
		     <if test="card2Img !=null">
		         , card2_img = #{card2Img}
		     </if>
		     <if test="credit1Img !=null">
		         , credit1_img = #{credit1Img}
		     </if>
		     <if test="credit2Img !=null">
		         , credit2_img = #{credit2Img}
		     </if>
		     <if test="bizLicenseImg !=null">
		         , biz_license_img = #{bizLicenseImg}
		     </if>
		     <if test="headImg !=null">
		         , head_img = #{headImg}
		     </if>
		     <if test="placeImg !=null">
		         , place_img = #{placeImg}
		     </if>
		     <if test="cashierImg !=null">
		         , cashier_img = #{cashierImg}
		     </if>
		     <if test="contractImg !=null">
		         , contract_img = #{contractImg}
		     </if>
		     <if test="otherFile !=null">
		         , other_file = #{otherFile}
		     </if>
		     <if test="fastpayRateT0 !=null">
		         , fastpay_rate_t0 = #{fastpayRateT0}
		     </if>
		     <if test="fastpayRateT1 !=null">
		         , fastpay_rate_t1 = #{fastpayRateT1}
		     </if>
		     <if test="syncTypeStatus !=null">
		         , sync_type_status = #{syncTypeStatus}
		     </if>
		     
		 </trim>
	</sql>
	
	<!--  
		分页查询的条件
	-->
	<sql id="queryCondtion">
	     <trim prefix="where" prefixOverrides="and |or">
		     <if test="mobile !=null">
		         and mobile=#{mobile}
		     </if>
		     <if test="unsynced !=null">
		         <![CDATA[ and sync_type_status&(1<<#{unsynced}) = 0]]>
		     </if>
	     </trim>
	</sql>
	
	
	<insert 
    	id="add"
    	parameterType="MerchInfo" 
    	useGeneratedKeys="true" 
    	keyProperty="id">
    	insert into <include refid="tableName"/>(
			merchno,branchno,merch_name,email,mobile,address,status,open_time,audit_agentno,
			audit_status,judg_status,debit_rate,debit_fixed,credit_rate,credit_fixed,
			accountno,account_type,account_name,bankno,bank_name,add_time,t0_rate,biz_type,merch_type,
			mcc,manu_rate,link_man,industry_type,app_rate,app_fixed,app_credit,app_t0_rate,super_agent,
			merch_key,merch_level,trans_ctrl,identity_card,province,city,area_code,full_name,legal_name,
			fastpay_rate_t0,fastpay_rate_t1,type,force_settle_type
    	)values(
			#{merchno},#{branchno},#{merchName},#{email},#{mobile},#{address},#{status},#{openTime},#{auditAgentno},
			#{auditStatus},#{judgStatus},#{debitRate},#{debitFixed},#{creditRate},#{creditFixed},
			#{accountno},#{accountType},#{accountName},#{bankno},#{bankName},#{addTime},#{t0Rate},#{bizType},#{merchType},
			#{mcc},#{manuRate},#{linkMan},1,#{appRate},#{appFixed},#{appCredit},#{appT0Rate},#{superAgent},
			#{merchKey},#{merchLevel},#{transCtrl},#{identityCard},#{province},#{city},#{areaCode},#{fullName},#{legalName},
			#{fastPayRateT0},#{fastPayRateT1},#{type},#{forceSettleType}
    	)
    </insert>
    
    <!-- 
    	更新记录 
    -->
    <update 
		id="mod" 
		parameterType="MerchInfo">
		update
			<include refid="tableName"/>
			<include refid="updateField"/>
		where
			id = #{id}
	</update>
	
	<!--  
    	分页查询信息
    -->
    <select 
    	id="listByPage"
    	parameterType="MerchInfo4Search"
    	resultType="MerchInfo">
    	select 
    		 <include refid="fieldMapping"/>
    	from 
    		<include refid="tableName"/>
    		<include refid="queryCondtion"/>
    	order by 
    		add_time desc
    	limit
    		${startIndex}, ${pageSize}
    </select>
	
    <!--  
    	根据商户编号获取商户信息
    -->
    <select 
    	id="getByMerchno"
    	parameterType="String"
    	resultType="MerchInfo">
    	select 
    		 <include refid="fieldMapping"/>
    	from 
    		<include refid="tableName"/>
    	where 
    		merchno = #{merchno}
    </select>
    <!--  
    	根据商户编号获取商户信息
    -->
    <select 
    	id="getById"
    	parameterType="Integer"
    	resultType="MerchInfo">
    	select 
    		 <include refid="fieldMapping"/>
    	from 
    		<include refid="tableName"/>
    	where 
    		id = #{id}
    </select>
    
    <!-- 
		根据卡号获取发卡行名称
	-->
	<select 
		id="getBankByCardno"
		parameterType="String"
		resultType="String">
		select 
			bank_name 
		from 
			system_card_bin 
		where 
			#{cardno} like concat(card_bin, '%') 
			and card_length = length(#{cardno})	
		limit 1
	</select>
	
	<select 
		id="getBankIDByBankName"
		parameterType="String"
		resultType="String">
		select 
			bank_id 
		from 
			system_bank_id 
		where 
			#{bankName} like concat('%',bank_name, '%') 
		limit 1
	</select>
	
	<update 
		id="modifyHXTCMerchFee" 
		parameterType="MerchInfo">
		update
			merch_info
		set
			fastpay_rate_t0 = #{fastpayRateT0}
		where
			merchno = #{merchno}
	</update>
	
	<select 
    	id="getMerchMaxId"
    	parameterType="String"
    	resultType="String">
    	select 
    		max(substr(merchno, 8,8))
    	from 
    		merch_info
    	where
    		merchno like concat(#{merchno}, '%')
    </select>
    
    <update 
		id="modifyYUFUMerchFee" 
		parameterType="MerchInfo">
		update
			merch_info
		set
			fastpay_rate_t0 = #{fastpayRateT0},
			fastpay_rate_t1 = #{fastpayRateT1}
		where
			merchno = #{merchno}
	</update>
	
	<!-- 获取昨天已经完成完善资料的数据 -->
	<select id="getByMerchInfo" parameterType="MerchInfo" resultMap="merchInfoResultMap">
		select 
			<include refid="Merch_info_Column_List" />
    	from 
    		merch_info
    	where real_name_auth_status = #{realNameAuthStatus} and <![CDATA[DATE_FORMAT(add_time,'%Y-%m-%d')>=DATE_SUB(curdate(),INTERVAL +30 DAY)]]>
	</select>
	
	<!-- 仅做测试 -->
	<select id="getAllMerch" resultMap="merchInfoResultMap">
		select * from merch_info
	</select>
	<!--   仅做测试 -->
	
	<update 
		id="batUpdMerchInfo" 
		parameterType="HashMap">
		update 
			merch_info 
		set 
			super_agent=#{agentno}
		where id in(select merch_id from merch_user where refer_name=#{id});
	</update>
</mapper>