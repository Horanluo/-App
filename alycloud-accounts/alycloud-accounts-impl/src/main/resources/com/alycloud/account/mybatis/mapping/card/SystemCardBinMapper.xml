<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.alycloud.account.mapper.SystemCardBinMapper">
  <resultMap id="systemCardBinResultMap" type="SystemCardBin">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 20 11:24:26 GMT+08:00 2017.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="card_bin" jdbcType="VARCHAR" property="cardBin" />
    <result column="bank_code" jdbcType="VARCHAR" property="bankCode" />
    <result column="bank_name" jdbcType="VARCHAR" property="bankName" />
    <result column="card_name" jdbcType="VARCHAR" property="cardName" />
    <result column="card_type" jdbcType="INTEGER" property="cardType" />
    <result column="card_length" jdbcType="INTEGER" property="cardLength" />
  </resultMap>
  
  <sql id="System_Card_Bin_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 20 11:24:26 GMT+08:00 2017.
    -->
    id, card_bin, bank_code, bank_name, card_name, card_type, card_length
  </sql>
  <select id="getCardBinInfo" parameterType="java.lang.String" resultMap="systemCardBinResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 20 11:24:26 GMT+08:00 2017.
    -->
    select
    <include refid="System_Card_Bin_Column_List" />
    from system_card_bin
    where card_bin like CONCAT('%', #{cardBin}, '%')
  </select>
  
  <select id="getCardInfo" parameterType="java.lang.String" resultMap="systemCardBinResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Oct 20 11:24:26 GMT+08:00 2017.
    -->
    select 
	<include refid="System_Card_Bin_Column_List" /> 
	from system_card_bin 
	where #{cardno} like concat(card_bin, '%') and card_length = length(#{cardno}) limit 1
  </select>
</mapper>